<h1>Tumblr Archive Import</h1>

<% if @archive.error %>
  <h2>Something went wrong</h2>
  <%= "#{@archive.error.class}: #{@archive.error}" %>
<% else %>
  <h2>Successfully imported <%= @archive.total_imported_files_count %> tumblr files!</h2>
  <% if @archive.skipped_count != 0 %>
    <span><%= @archive.skipped_count %> where skipped, because they are already imported.</span>
  <% end %>

  <% @archive.imported_files.each_key do |artist_url_id| %>
    <%= render "artists/artist_link", artist_url: ArtistUrl.find(artist_url_id) %>
  <% end %>

  <% if @archive.failed_imports.any? %>
    <h3>The following reblogs failed to import:</h3>
    <ul>
    <% @archive.failed_imports.each do |file_name| %>
      <li><%= file_name %></li>
    <% end %>
    </ul>
  <% end %>
<% end %>
